2025-05-23
Рабочий пример (добавил тупую анимашку в тетрис):

SE2D.addGraphResources(["data/images/phone0.png", "fon",
		"data/images/brick.png", "c_brick",
		"data/images/quest.png", "quest",
		"data/images/left.png", "left",
		"data/images/right.png", "right",
		"data/images/bottom.png", "bottom",
		"data/images/rotate.png", "rotate",
		"data/images/vl.png", "c_vert_line",
		[[
			[1, "data/images/anim0/01.png"],
			[24, "data/images/anim0/02.png"],
			[48, "data/images/anim0/02.png"]
		], 
		   0/*lvl*/, [10, 10]/*[xy]*/, [100, 200]/*wh*/, [0.5, 0.7]/*scale*/, 'parentClipId'], "first_anim"
	]);


Итак, вместо пути передаём массив параметров (которые в итоге придут из IDE)

0 -  ключевые кадры.
 [номер_ключевого_кадра, путь]
  В первом элементе сейчас всегда ожидается номер_ключевого_кадра = 1.
  Последний кадр должен быть ключевым. Пока так.

1 - номер уровня временной шкалы. Надо иметь ввиду, что у программно созхдаваемых клипов
     var mc = new Sprite();
     он равен 0. 
     mc._level == 0 // true
  То есть, в UI IDE Уровни будут нумероваться с 0. Ну и ладно. Будем нумеровать с 1
    а при экспорте кода делать -1.
   
2 - массив [x,y]
  
3 - массив размеров. ПОка не поддерживается. Но при экспорте из IDE должен передаваться.
   А scale должен вычислятсья от него.
   
4 - Массив масштабирования по осям x,y

5 - id рподительского клипа. Не факт, что работает, не проверял. Но закодировано.


_root пока не очень будет поддерживать временную шкалу. Хотел  что-то придумать, например обогащение 
 _root методами Sprite. 
 
Но пока сделал с виду элегантнее, _root теперь спрайт, а метод addChild у него перегружен.
